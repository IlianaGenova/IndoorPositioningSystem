<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel='stylesheet' type='text/css' href='/public/css/main.css' />
	<title>IPS</title>

	<!-- filepond -->
	<link href="https://unpkg.com/filepond/dist/filepond.css" rel="stylesheet">
	<link href="https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.css" rel="stylesheet">
  <link rel='stylesheet' type='text/css' href='/public/css/map.css' />
	<script src="https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.js"></script>
	<script defer src="https://unpkg.com/filepond-plugin-file-encode/dist/filepond-plugin-file-encode.js"></script>
	<script defer src="https://unpkg.com/filepond-plugin-image-resize/dist/filepond-plugin-image-resize.js"></script>
	<script defer src="https://unpkg.com/filepond/dist/filepond.js"></script>
	<script defer src="/fileupload.js"></script>

</head>
<body>
	<div class="page">
		<div class="body">
      <!-- <canvas id="canvas" class="canvas visualise"></canvas> -->
			<!-- <div id="my-interactive" class="interactive"></div> -->
			<!-- <div id="myText"></div> -->
      <!-- <form id="maps" class="form" action="/admin/maps" method="post" onsubmit="submitForm();"> -->
        <div class="maps"> 
          <div class="form-heading">
            <h1 class="title">Maps</h1>
            <!-- <br> -->
            <h2 class="subtitle">Click a map to select it as active.</h2>
            <!-- TODO mark active map -->
            <% if (maps.length >= 1) { %>
              <% for(let i = 0; i < maps.length; i++) { %>
                <% if(maps[i].fileType == 'image/png' || maps[i].fileType == 'image/jpeg') { %>
                  <button class="map" type="submit" onclick="">
                    <img src="<%= "data:"+ maps[i].fileType + ";base64," + maps[i].file %>" alt="nothing here">
                    <br>
                  </button>
                  <% } %>
                  <% } %>
                  <% } if (maps.length == 0) { %>
                    <img class="logo hide" src="/svgs/map.svg" alt="-Stay connected-">
                    <h2>Your maps will appear here after uploading. <br> No current maps uploaded found.</h2>
                    <% } %>
          </div>         
      </div>
      <!-- TODO add name to schematic -->
      <!-- TODO select map as active -->
      <!-- TODO remove map -->
      <!-- </form> -->
      <form id="form" class="form" action="/admin/maps" method="post" onsubmit="submitForm();">
				<!-- <button type="button" class="option generate" onclick="drawCoordinateSystem()">Set coordinates</button> -->
        <img class="logo hide" src="/svgs/add_files.svg" alt="-Stay connected-">
        <!-- <br> -->
			  <input type="file" name="fileinput" class="file-inputarea filepond">
				<!-- <br> -->
				<input class="submit" type="submit">
			</form>
		</div>
	</div>


	<script type="text/javascript">
		var form = document.getElementById('form')
	
		function submitForm() {
			event.preventDefault();
			form.submit();
		}
	</script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
	<script src="http://code.jquery.com/jquery-latest.min.js"></script>
	
</body>
</html>
